---
title: '【JavaScript】モーダルを作ってclassに入門する'
emoji: '🐻'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: [JavaScript, tech, modal, Web制作]
published: false
---

## この記事を書こうと思った理由

- Web 制作で class を使う、という場合に、具体的で class が使いたくなるような解説や記事があまり無かったため。
- class のチュートリアルや、記事を読んで、いざ書こうと思ったら何もできなかった過去の自分と同じような人の手助けのため。
- class の継承を使ってみて、自分自身の理解度を上げるため。

## ゴール

- とにかく class に触れてみる。
- class 使ってみよう！と思うこと。
- class のワケワカランから脱出する。
  :::message
  class やオブジェクト指向についての深い理解や、this や constructor、インスタンス等の詳しい解説は行いません。
  :::

## 対象者

JS 初学者

## class のメリット

なぜ、class を使うのでしょうか？メリットを ChatGPT さんに聞いてみたところ、
**明確な構造と可読性**と返ってきました。class を使うとコードの構造が明確なり読みやすくなります。
チーム開発をすると、自分以外の人にもコードを見られる機会が増えるので、可読性だけでも重要なメリットと言えそうです。
トライしやすいメリットですね！発展的な機能は、慣れたら使えば良いと思います！
まず慣れていきます。
:::message
その他のメリットは、発展的な内容を含むためここでは触れません。
:::

## まず従来の書き方で書いてみる

従来の、という言い回しが正しいかは分かりませんが、
class を使う前は下記のように function を使って記述していました。

### 完成イメージ

![](/images/modal/20240723_modal01.gif)
シンプルでとてもかっこいいモーダルができています。

### HTML

```html
<div class="container">
  <div class="modal">
    <button class="js-openButton" type="button">オープン01</button>
    <div class="modal-content">
      <button class="js-closeButton modal-close-button" type="button">クローズ</button>
      <div class="inner">
        <p class="js-modalText">
          ここはモーダルのテキストや内容が入ります。<br />ここはモーダルのテキストや内容が入ります。<br />ここはモーダルのテキストや内容が入ります。
        </p>
      </div>
    </div>
  </div>
</div>
<!-- /.container -->
```

### CSS

```css
* {
  margin: 0;
  padding: 0;
}

button {
  cursor: pointer;
}

.container {
  width: 100%;
  height: 100vh;
  display: grid;
  place-content: center;
}

.modal-content {
  display: none;
  position: relative;
  width: 480px;
  height: 200px;
  border: 1px solid #333;
  background-color: #fff;
}

.modal-close-button {
  position: absolute;
  top: 10px;
  right: 10px;
}

.inner {
  display: grid;
  place-content: center;
  width: 100%;
  height: 100%;
}

.modal.is-open .modal-content {
  display: block;
}
```

### JS

```js
const body = document.querySelector('body');

const modal = document.querySelector('.modal');
const openButton = document.querySelector('.js-openButton');
const closeButton = document.querySelector('.js-closeButton');

// モーダルを開く関数
const openModal = () => {
  openButton.addEventListener('click', () => {
    modal.classList.add('is-open');
    body.style.backgroundColor = 'rgb(0 0 0 / 0.5)';
  });
};
openModal();

// モーダルを閉じる関数
const closeModal = () => {
  closeButton.addEventListener('click', () => {
    modal.classList.remove('is-open');
    body.style.backgroundColor = '#fff';
  });
};
closeModal();
```

class をまだ使った事が無い方は、こんな感じの記述になるのでは無いでしょうか？
`querySelector`を使って要素を取得し、クリックイベントで`is-open`クラスや、css の付け外しを行なっています。
では、ここから class を使った記述に変更していきます。
HTML と CSS に変更はありません。

## class を使った書き方

### JS

```js
class Modal {
  constructor() {
    this.body = document.querySelector('body');
    this.modal = document.querySelector('.modal');

    this.init();
  }

  init() {
    this.openModal();
    this.closeModal();
  }

  // モーダルを開くメソッド
  openModal() {
    const openButton = document.querySelector('.js-openButton');

    openButton.addEventListener('click', () => {
      this.modal.classList.add('is-open');
      this.body.style.backgroundColor = 'rgb(0 0 0 / 0.7)';
    });
  }

  // モーダルを閉じるメソッド
  closeModal() {
    const closeButton = document.querySelector('.js-closeButton');

    closeButton.addEventListener('click', () => {
      this.modal.classList.remove('is-open');
      this.body.style.backgroundColor = '#fff';
    });
  }
}

new Modal();
```

class で書くとこんな感じになります。
先ほどの function の記述と見比べても、書き方が変わっただけなので、書けるような気がしてきます。
class 独自の記述を覚えていきます。

#### class の記述について

- **class**
  `class Modal {}`
  class を使う場合は class クラス名 {}というように書きます。クラス名は慣習で大文字始まりとなります。
  呼び出す際に、`new Modal()`とします。

- **constructor**
  `constructor(){}`
  constructor とは、クラスのインスタンスを初期化するためのメソッドです。が、これを理解しようとすると難しいので、
  constructor 内では、
  `const`ではなく、`this`を使って定義すること。
  定義したら、`openModal()`や`closeModal()`のメソッド内で使いまわせること。
  まず、これらを覚えましょう。

- **メソッド**
  `init()`、`openModal()`、`closeModal()`これらはメソッドと呼ばれます。メソッドは class で使う**関数**です。
  呼び方が変わっただけと思えば、怖く無いです。
  `init()`内で、`openModal()`と`closeModal()`が呼ばれています。
  別のメソッド内で呼ばれる場合は、`this.`を付与します。

- **init()**
  その他のメソッドを呼び出すメソッドとして `init()`が定義される事が多くあります。
  `init()`内で他のメソッドを呼び出す場合は、`this`を使います。
  :::message
  javascript において`init()`という特別なメソッドは存在しませんが、慣習で使われるのが多い印象です。
  :::

上記が、慣れない書き方や単語ではないでしょうか？
**しっかり理解しようとすると、class の沼にハマってしまうので脱出が困難です。**

まずは書く回数を増やしてみる。
今まで書いた js の記述を class に直してみたりする事で class に慣れていきましょう！

このままだと、本当に書き換えただけなので class っぽい事をやってみましょう。

#### constructor の引数を設定する
